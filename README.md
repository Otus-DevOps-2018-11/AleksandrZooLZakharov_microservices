# AleksandrZooLZakharov_microservices
AleksandrZooLZakharov Microservices repository

Задание Gitlab-CI-1
Создана виртуальная машина в GCP, установлен Docker, подготовлен docker-compose.yml и окружение. Запущен docker с Gitlab CI. Создал группу, проект, сделал чекаут из своей виртуальной машины с домашками в гитлабовский гит. Сделал пуш, увидел его в гитлабе.
Редактировал файл .gitlab-ci.yml, видел как он работает.
Создал раннера.
Добавил reddit. Добавил окружения. Добавил запуск job`а по кнопке. Ограничил выкатку на stage и prod нетэгированных коммитов.
Проверил создание динамически новых окружений при создании новых branch`ей

Задание Докер-4
Увидел разницу между сетевыми драйверами none и host.
При многократном запуске docker run --network host -d nginx запущеными остаются два инстанса - первый и последний из запускаемых.
Запустил проект reddit на bridge-сети.
Запустио проект разделенным на front и back end`ы.
Посмотрел на docker-proxy.
Установил docker-compose.
Скачал предложенный файл. Запустил docker-compose, используя переменные окружения.
Изменил настроечный файл в логику front-back-end.
Параметризовал с помощью .env (включая базовое имя проекта)
Базовое имя можно задать несколькими способами (в наименовании не учитываются спецсимволы):
 + изменить имя папки, содержащей docker-compose.yml
 + сделать export COMPOSE_PROJECT_NAME=_ваш-вариант_
 + COMPOSE_PROJECT_NAME=_ваш-вариант_ можно вложить в .env файл
 + запустить композитора с ключом: docker-compose -p your-project-name up
 ++ а для контейнеров в .yml файле можно добавить: container_name: your-cont-name

Задание Докер-3
Взял линтер Hadolint из Docker-образа
Ранее созданный инстанс в GCP запущен
Развёрнут src, созданы все Dockerfile`s
Из трёх образов с первого раза собрался только UI. Ни у кого вопросов не возникало, поэтому возился и решил сам. Пересобрал всё)
В post пришлось добавить явную установку gcc и его зависимости. В comment пришлось заменить список репо в etc/apt/sources.list, иначе обновление apt-get (как и apt) заканчивалось ошибкой 404 (адрес репо устарел в этом дистрибутиве)
Создана сеть, запущены контейнеры. С линтером слегка уменьшил размер двух образов из трёх - с comment ничего не вышло ^_*
Создал и подключил Volume, данные сохраняются после перезапуска контейнеров.

Задание Докер-2
Создан новый проект в GCP
Настроен и инициализирован gcloud, установлен docker-machine и настроен на работу с GCP
При повторении практики из демо на лекции видно именно то, о чем говорилось на лекции - в том числе что namespaces ограничивают видимость пидов, что это можно регулировать и т.п.
Подготовлены файлы для сборки образа с его установкой, настройкой и стартом нужного сервиса сразу после сборки.
Собран образ, запущен контейнер, отправлен в Docker Hub, установлен оттуда и произведены все проверки.

Задание Докер-1
Настроил проверку Travis-CI (по аналогии с infra)
Установлен Докер, запущены Привет мир, собственный контейнер из базового образа убунту.
Создан свой образ, изучены базовые команды докер.
Описано основное отличие образа от контейнера.
(image is read-only stock of layers, but container have read and write fs)
Удалены контейнеры и образы.

Рабочее окружение развернуто в чистом образе Ubuntu, всё рабочее окружение настроено заново.
